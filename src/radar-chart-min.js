var RadarChart={draw:function(e,t,n){function f(e,t,n,i){n=typeof n!=="undefined"?n:1;return t*(1-n*i(e*r.radians/s))}function l(e,t,n){return f(e,t,n,Math.sin)}function c(e,t,n){return f(e,t,n,Math.cos)}var r={containerClass:"radar-chart",radius:5,w:600,h:600,factor:.95,factorLegend:1,levels:3,maxValue:0,radians:2*Math.PI,color:d3.scale.category10()};d3.entries(n||{}).forEach(function(e){r[e.key]=e.value});r.maxValue=Math.max(r.maxValue,d3.max(t,function(e){return d3.max(e.map(function(e){return e.value}))}));var i=t[0].map(function(e,t){return e.axis});var s=i.length;var o=r.factor*Math.min(r.w/2,r.h/2);d3.select(e).select("svg").remove();var u=d3.select(e).append("svg").attr("width",r.w).attr("height",r.h).append("g").classed(r.containerClass,1);var a;for(var h=0;h<r.levels;h++){var p=o*((h+1)/r.levels);u.selectAll(".level404").data(i).enter().append("svg:line").attr("x1",function(e,t){return l(t,p)}).attr("y1",function(e,t){return c(t,p)}).attr("x2",function(e,t){return l(t+1,p)}).attr("y2",function(e,t){return c(t+1,p)}).attr("class","level").attr("transform","translate("+(r.w/2-p)+", "+(r.h/2-p)+")")}series=0;var d=u.selectAll(".axis").data(i).enter().append("g").attr("class","axis");d.append("line").attr("x1",r.w/2).attr("y1",r.h/2).attr("x2",function(e,t){return l(t,r.w/2,r.factor)}).attr("y2",function(e,t){return c(t,r.h/2,r.factor)});d.append("text").attr("class",function(e,t){var n=l(t,.5);return"legend "+(n<.4?"left":n>.6?"right":"middle")}).attr("dy",function(e,t){var n=c(t,.5);return n<.1?"1em":n>.9?"0":"0.5em"}).text(function(e){return e}).attr("x",function(e,t){return l(t,r.w/2,r.factorLegend)}).attr("y",function(e,t){return c(t,r.h/2,r.factorLegend)});t.forEach(function(e,t){dataValues=[];u.selectAll(".nodes").data(e,function(e,t){dataValues.push([l(t,r.w/2,parseFloat(Math.max(e.value,0))/r.maxValue*r.factor),c(t,r.h/2,parseFloat(Math.max(e.value,0))/r.maxValue*r.factor)])});dataValues.push(dataValues[0]);u.selectAll(".area404").data([dataValues]).enter().append("polygon").attr("class","area radar-chart-serie"+series).style("stroke",r.color(series)).attr("points",function(e){var t="";for(var n=0;n<e.length;n++){t=t+e[n][0]+","+e[n][1]+" "}return t}).style("fill",function(e,t){return r.color(series)}).on("mouseover",function(e){u.classed("focus",1);d3.select(this).classed("focused",1)}).on("mouseout",function(){u.classed("focus",0);d3.select(this).classed("focused",0)});series++});series=0;t.forEach(function(e,t){u.selectAll(".nodes").data(e).enter().append("svg:circle").attr("class","radar-chart-serie"+series).attr("r",r.radius).attr("alt",function(e){return Math.max(e.value,0)}).attr("cx",function(e,t){dataValues.push([l(t,r.w/2,parseFloat(Math.max(e.value,0))/r.maxValue*r.factor),c(t,r.h/2,parseFloat(Math.max(e.value,0))/r.maxValue*r.factor)]);return l(t,r.w/2,Math.max(e.value,0)/r.maxValue*r.factor)}).attr("cy",function(e,t){return c(t,r.h/2,Math.max(e.value,0)/r.maxValue*r.factor)}).attr("data-id",function(e){return e.axis}).style("fill",r.color(series)).on("mouseover",function(e){newX=parseFloat(d3.select(this).attr("cx"))-10;newY=parseFloat(d3.select(this).attr("cy"))-5;a.attr("x",newX).attr("y",newY).text(e.value).classed("visible",1);z="polygon."+d3.select(this).attr("class");u.classed("focus",1);d3.select(z).classed("focused",1)}).on("mouseout",function(){a.classed("visible",0);z="polygon."+d3.select(this).attr("class");u.classed("focus",0);d3.select(z).classed("focused",0)}).append("svg:title").text(function(e){return Math.max(e.value,0)});series++});a=u.append("text").attr("class","tooltip")}}